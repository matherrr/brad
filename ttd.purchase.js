(function() {
    /* TTD by pengtai adtech v1.1.1.20200106 refer https://obfuscator.io/ */
    var _0x3e8a=['body','__pop_send','href','1.1.0','keys','join','src','__on_interval_proc','length','shift','__interval','bind','ttdPixel','/pxl/','_push_track','__accounts','__queue','concat','map','assign','pixel','__endpoint','__proceeding','__onload','__pixel','indexOf','trim','push','querySelector','iframe','width','height','style','display','none','title','TTD\x20Universal\x20Pixel','addEventListener','load'];(function(_0x15d768,_0xd54420){var _0x955af6=function(_0x49242c){while(--_0x49242c){_0x15d768['push'](_0x15d768['shift']());}};_0x955af6(++_0xd54420);}(_0x3e8a,0xa9));var _0x4e66=function(_0x15d768,_0xd54420){_0x15d768=_0x15d768-0x0;var _0x955af6=_0x3e8a[_0x15d768];return _0x955af6;};(function(_0xd54420,_0x955af6,_0x49242c,_0x324205){_0xd54420[_0x955af6]=_0xd54420[_0x955af6]||function(_0x1790cd,_0x38355e){api_univ='/up';api_pixel=_0x4e66('0x0');this[_0x4e66('0x1')]=function(_0x4172ba,_0x1a521d,_0x2f60c3,_0x28b3e1,_0x4d0834){let _0x5e07c0=_0x28b3e1||this[_0x4e66('0x2')];let _0x3ba55a=_0x4d0834(_0x4172ba,_0x1a521d);this[_0x4e66('0x3')]=this[_0x4e66('0x3')][_0x4e66('0x4')](_0x5e07c0[_0x4e66('0x5')](function(_0x58e3e6){return[Object[_0x4e66('0x6')]({'adv':_0x58e3e6},_0x3ba55a),_0x2f60c3];}));};this['track']=function(_0x44eb96,_0x328bbb,_0x2675d6){this[_0x4e66('0x1')](_0x44eb96,_0x328bbb,null,_0x2675d6,function(_0x41d458,_0x3961b4){return Object[_0x4e66('0x6')]({'upid':_0x41d458},_0x3961b4);});};this[_0x4e66('0x7')]=function(_0x5e9766,_0x4564d4,_0x3e7e42){this[_0x4e66('0x1')](_0x5e9766,_0x4564d4,_0x49242c+api_pixel,_0x3e7e42,function(_0x3b0a98,_0x3ed0ea){return Object[_0x4e66('0x6')]({'ct':'0:'+_0x3b0a98,'fmt':0x3},_0x3ed0ea);});};this[_0x4e66('0x3')]=[];this[_0x4e66('0x8')]=_0x38355e||_0x49242c+api_univ;this[_0x4e66('0x9')]=null;this[_0x4e66('0xa')]=function(){this[_0x4e66('0x9')]=null;};this['__accounts']=[];this[_0x4e66('0xb')]=null;if(this[_0x4e66('0x2')][_0x4e66('0xc')](_0x1790cd[_0x4e66('0xd')]())<0x0){this[_0x4e66('0x2')][_0x4e66('0xe')](_0x1790cd);}if(!this[_0x4e66('0xb')]){let _0x145d0e='ttd_universal_pixel_frame';let _0x1167bb=_0x324205[_0x4e66('0xf')]('#'+_0x145d0e);if(!_0x1167bb){_0x1167bb=_0x324205['createElement'](_0x4e66('0x10'));_0x1167bb['id']=_0x145d0e;_0x1167bb[_0x4e66('0x11')]=0x0;_0x1167bb[_0x4e66('0x12')]=0x0;_0x1167bb[_0x4e66('0x13')][_0x4e66('0x14')]=_0x4e66('0x15');_0x1167bb[_0x4e66('0x16')]=_0x4e66('0x17');_0x1167bb[_0x4e66('0x18')](_0x4e66('0x19'),this[_0x4e66('0xa')]['bind'](this));_0x324205[_0x4e66('0x1a')]['appendChild'](_0x1167bb);}this[_0x4e66('0xb')]=_0x1167bb;}this[_0x4e66('0x1b')]=function(_0x299283,_0x2134ee){let _0x51ec79=_0x2134ee||this[_0x4e66('0x8')];if(!_0x299283)_0x299283={};_0x299283=Object[_0x4e66('0x6')](_0x299283,{'ref':location[_0x4e66('0x1c')],'upv':_0x4e66('0x1d')});let _0x55c012=Object[_0x4e66('0x1e')](_0x299283)['map'](function(_0x2bc9da){return _0x2bc9da+'='+encodeURIComponent(_0x299283[_0x2bc9da]);});let _0x382fe9=_0x51ec79+'?'+_0x55c012[_0x4e66('0x1f')]('&');this['__proceeding']=_0x382fe9;this[_0x4e66('0xb')][_0x4e66('0x20')]=_0x382fe9;};this[_0x4e66('0x21')]=function(){if(!this[_0x4e66('0x9')]&&0x0<this[_0x4e66('0x3')][_0x4e66('0x22')]){let _0x1e019b=this[_0x4e66('0x3')][_0x4e66('0x23')]();this[_0x4e66('0x1b')](_0x1e019b[0x0],_0x1e019b[0x1]);}};this[_0x4e66('0x24')]=setInterval(this[_0x4e66('0x21')][_0x4e66('0x25')](this),0xa);};}(window,_0x4e66('0x26'),'https://insight.adsrvr.org/track',document));

    const ttd_account_id = '9hr56de';
    const ttd_track_id = 't08ef02';
    window.ttd = window.ttd || new ttdPixel(ttd_account_id);

    let order_match = /\/checkout\/orderConfirmation\/([\w-]+)/.exec(location.pathname);
    let revenue = sessionStorage.getItem('.checkout.revenue');
    let basket_items = JSON.parse(window.sessionStorage.getItem('.checkout.items'));

    if(order_match && basket_items && revenue) {
        let prs = { v: revenue, orderid: order_match[1] };
        basket_items.forEach(function(item,i) {
            prs['td'+(i+1)] = item.id + '/' + item.quantity.toString() + '/' + item.price.toString();
        });

        ttd.pixel(ttd_track_id, prs);
    }
})();